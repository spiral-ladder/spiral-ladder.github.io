 
<!DOCTYPE html>
<html lang='en-US'>
<head>
  <meta charset='utf-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Utils considered harmful</title>
  <meta name="description" content="">
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="canonical" href="https://spiral-ladder.github.io/tech/2026/01/31/utils-considered-harmful.html">
  <link rel="alternate" type="application/rss+xml" title="bh" href="https://spiral-ladder.github.io/feed.xml">
  <style>
  @font-face {
    font-family: 'Open Sans'; src: url('/css/OpenSans-300-Normal.woff2') format('woff2');
    font-weight: 300; font-style: normal;
  }
  @font-face {
    font-family: 'JetBrains Mono'; src: url('/css/JetBrainsMono-400-Normal.woff2') format('woff2');
    font-weight: 400; font-style: normal;
  }
  @font-face {
    font-family: 'JetBrains Mono'; src: url('/css/JetBrainsMono-700-Normal.woff2') format('woff2');
    font-weight: 700; font-style: normal;
  }
  @font-face {
    font-family: 'EB Garamond'; src: url('/css/EBGaramond-400-Normal.woff2') format('woff2');
    font-weight: 400; font-style: normal;
  }
  @font-face {
    font-family: 'EB Garamond'; src: url('/css/EBGaramond-400-Italic.woff2') format('woff2');
    font-weight: 400; font-style: italic;
  }
  @font-face {
    font-family: 'EB Garamond'; src: url('/css/EBGaramond-700-Normal.woff2') format('woff2');
    font-weight: 700; font-style: normal;
  }
  @font-face {
    font-family: 'EB Garamond'; src: url('/css/EBGaramond-700-Italic.woff2') format('woff2');
    font-weight: 700; font-style: italic;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; margin-block-start: 0; margin-block-end: 0; }

  body {
    max-width: 80ch;
    padding: 2ch;
    margin-left: auto;
    margin-right: auto;
  }

  header { margin-bottom: 2rem; }
  header > nav { display: flex; column-gap: 2ch; align-items: baseline; flex-wrap: wrap; }
  header a { font-style: normal; color: rgba(0, 0, 0, .7); text-decoration: none; }
  header a:hover { font-style: normal; color: rgba(0, 0, 0, 1); text-decoration: none; }
  header .title { font-size: 1.25em; flex-grow: 2; }

  footer { margin-top: 2rem; }
  footer > p { display: flex; column-gap: 2ch; justify-content: center; flex-wrap: wrap; }
  footer a { color: rgba(0, 0, 0, .8); text-decoration: none; white-space: nowrap; }
  footer i { vertical-align: middle; color: rgba(0, 0, 0, .8) }

  </style>

  <link rel="stylesheet" href="/css/site.css">
  
</head>

<body>
  <header>
    <nav>
      <a class="title" href="/">bing</a>
      <a href="/about.html">About</a>
      <a href="/favourites.html">Favourites</a>
    </nav>
  </header>

  <main>
  <article >
<section id="Utils-considered-harmful">

<div class="title"><h1>Utils considered harmful </h1><time class="meta" datetime="2026-01-31">Jan 31, 2026</time></div>
<p><strong>Having a utils directory anywhere in your codebase is an anti-pattern</strong>. A function is a utility that turns some input into an output. 
A rust macro is a utility that generates some rust code at compile-time. A struct is a utility that groups data together, and so on.</p>
<p>There are also <a href="https://www.jeromethibaud.com/en/blog/utils-considered-harmful/">other</a> <a href="https://mattilehtinen.com/articles/dunghill-anti-pattern-why-utility-classes-and-modules-smell/">blog</a> <a href="https://medium.com/@samurai.stateless.coder/the-utils-trap-why-i-stopped-using-utility-classes-and-what-i-do-instead-5d1f461c723a">posts</a> (Each word is a link to a different blog) which share this same view.</p>
<p>Usually,  having a utils directory or file means it ends up being a dumping ground for code that we were too lazy to think of a good name for.
To not have this problem, we can simply not have a utils directory/file.</p>
<p>I’d argue the only case for having some sort of file/directory named utils is when there is a prefix explaining what sort of utils they act on, eg. <code>math_utils.zig</code> would be an acceptable name. But I’m a purist in the sense that I think having nothing named utils is best.</p>
<p>Instead of naming something utils, prefer instead a domain-first approach.
If a collection of functions operate on a specific data structure, consider naming the file after that structure.
Example: A <code>BeaconState</code> in an Ethereum consensus client contains an array of <code>Validator</code>s. 
Any functions that act upon this <code>Validator</code> structure can be named <code>validators.zig</code>.</p>
<p>Discoverability from a file explorer level is underrated; files put together imply a closer relationship than files put in a separate directory.
Files put on the same level imply that they share the same hierarchy in the project - they may be related but neither files ‘own’ each other.</p>
<p>Your responsibility as a code owner is to minimize cognitive load of the reader of the codebase. Thoughtful naming and organisation of your project works towards this goal by telling your readers as much as possible without having to go into the contents of a file or a directory.</p>
</section>
</article>
  </main>

  <footer>
  </footer>
</body>

</html>
